<div id="users" ng-init="getUsers()">

	<h1><i class="fa fa-1x fa-group"></i> Users
		<button class="btn btn-default btn-sm" data-toggle="modal" data-target="#user-modal" ng-click="user = {}">
			New User
		</button>
	</h1>
	<hr>

	<div class="row">
		<div class="col-md-12">
			<div class="table-responsive">
				<table class="table table-bordered table-hover table-condensed">
					<thead>
					<tr>
						<th class="tc"><input type="checkbox"></th>
						<th>Username</th>
						<th>E-mail</th>
						<th>Active</th>
						<th>Last Updated</th>
						<th class="actions">Actions</th>
					</tr>
					</thead>
					<tbody>
					<tr ng-repeat="user in users">
						<td class="tc">
							<input type="checkbox" value="{{user._id}}">
						</td>
						<td>{{ user.username }}</td>
						<td> {{user.email}}

							<span class="label label-primary" ng-repeat="group in user.groups">{{group}}</span>
						</td>

						<td> {{user.active}}</td>
						<td> {{user.updated_at | date:'medium'}}</td>
						<td class="actions">
							<div class="btn-group">
								<button type="button" class="btn btn-default btn-sm" ng-click="selectUser(user);" data-toggle="modal"
												data-target="#user-modal">
									<i class="fa fa-edit"></i>
								</button>
								<button type="button" class="btn btn-default btn-sm" ng-click="deleteUser($index, user);">
									<i class="fa fa-trash-o"></i>
								</button>
							</div>
						</td>
					</tr>
					</tbody>
				</table>
			</div>

			<div id="user-modal" class="modal fade">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
								&times;
							</button>
							<h4 class="modal-title" ng-hide="user._id">New User</h4>
							<h4 class="modal-title" ng-show="user._id">Edit User</h4>
						</div>
						<div class="modal-body">
							<div class="profile-view">
								<div class="row">
									<div class="col-sm-8 col-xs-7">
										<form name="UserForm" class="form-horizontal" ng-submit="addUser(user)">

											<div fg-form
													 fg-form-data="user"
													 fg-schema="userSchema">
											</div>

										</form>
									</div>
									<div class="col-sm-4 col-xs-5">
										<aside class="profile-pic center">

											<div class="well well-sm">
												<img ng-src="{{ user.email | gravatar }}" alt="{{App.session.user.username}}"/>

												<br/>
												<small> To change visit <a href="gravatar.com" target="_blank">gravatar.com</a></small>
											</div>
										</aside>
									</div>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">
								Close
							</button>
							<button type="button" class="btn btn-primary" ng-click="addUser(user)" ng-disabled="!UserForm.$valid">
								Submit
							</button>
						</div>
					</div>
					<!-- /.modal-content -->
				</div>
				<!-- /.modal-dialog -->
			</div>
			<!-- /.modal -->
		</div>
	</div>
</div>
